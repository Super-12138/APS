import{_ as L,aL as $,aJ as j,q,s as z,r as m,$ as G,c as y,d as n,e as l,h as r,f as c,N as J,a3 as O,j as W,a4 as h,aM as H,o as i,F as k,a2 as w,k as g,p as Q,l as X,a7 as Y,i as x,t as Z}from"./index-ba92c6b8.js";import{E as ee,a as ae}from"./el-table-column-fef6b0da.js";import"./el-checkbox-55ac5a6b.js";import"./el-scrollbar-7101c886.js";import{a as te,E as le}from"./el-radio-eee1d8c4.js";import{E as oe,a as se}from"./el-select-e5188bed.js";import"./isEqual-3fc68a3b.js";const _=p=>(Q("data-v-1795ece3"),p=p(),X(),p),ne={class:"container"},re={class:"head"},ce=_(()=>n("span",null,"产品族:",-1)),de=_(()=>n("span",null,"人数：",-1)),ue=["onKeyup","disabled"],ie=_(()=>n("span",null,"分组",-1)),pe=[ie],me={class:"dialog-footer"},_e=_(()=>n("span",null,"保存",-1)),be=[_e],fe={class:"main"},ye={__name:"createBasePlan",setup(p){const B=$(),e=j();q();const V=z();function C(){e.getProcessCapacityByProductFamily(e.createBasePlan.productFamily).then(o=>{const a=document.getElementById("selectNumber"),u=document.getElementById("selectProductFamily");e.createBasePlan.Edited=!0,a.disabled=!0,u.disabled=!0}).catch(o=>{})}const d=m(!1),b=m();function F(){e.getAllProductFamily().then(o=>{console.log("点开了产品族的下拉框")}).catch(o=>{})}const P=m([]),N=G(()=>Array.from({length:e.createBasePlan.number},(o,a)=>a+1)),v=m(null);function T(){const o="员工"+b.value;P.value.forEach(a=>{a.employeeName=o}),v.value.clearSelection(),d.value=!1}const S=()=>{d.value=!1};function M(){e.createBasePlan.Edited==!0?(console.log(e.createBasePlan.Edited),d.value=!0):h.alert("请按下回车确认人数","提示",{type:"info",confirmButtonText:"好的"})}function I(){e.saveProcessScheme({data:e.createBasePlan.data,number:e.createBasePlan.number}).then(o=>{o.code==200&&(h.alert("保存成功了","保存成功",{type:"success",confirmButtonText:"好的",callback:a=>{V.back();let u=B.tabsList.find(f=>f.name==="createBasePlan");B.closeTab(u)}}),e.createBasePlan.Edited=!1),o.code==201&&h.alert(o.message,"无法保存",{type:"error",confirmButtonText:"好的"})}).catch(o=>{}),console.log(e.createBasePlan.data)}function R(o){P.value=o}return(o,a)=>{const u=se,f=oe,U=le,A=te,E=Y,D=H,s=ae,K=ee;return i(),y("div",ne,[n("div",re,[ce,l(f,{class:"product",id:"selectProductFamily",modelValue:c(e).createBasePlan.productFamily,"onUpdate:modelValue":a[0]||(a[0]=t=>c(e).createBasePlan.productFamily=t),placeholder:"Select",onClick:F},{default:r(()=>[(i(!0),y(k,null,w(c(e).productFamily,t=>(i(),x(u,{key:t,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),de,J(n("input",{id:"selectNumber",type:"number","onUpdate:modelValue":a[1]||(a[1]=t=>c(e).createBasePlan.number=t),onKeyup:W(C,["enter"]),disabled:c(e).createBasePlan.Edited},null,40,ue),[[O,c(e).createBasePlan.number]]),n("button",{onClick:M,class:"group fengzu"},pe),l(D,{class:"employee",modelValue:d.value,"onUpdate:modelValue":a[4]||(a[4]=t=>d.value=t),title:"请选择你的员工",width:"30%","before-close":S},{footer:r(()=>[n("span",me,[l(E,{onClick:a[3]||(a[3]=t=>d.value=!1)},{default:r(()=>[g("取消")]),_:1}),l(E,{type:"primary",onClick:T},{default:r(()=>[g(" 确定 ")]),_:1})])]),default:r(()=>[l(A,{modelValue:b.value,"onUpdate:modelValue":a[2]||(a[2]=t=>b.value=t)},{default:r(()=>[(i(!0),y(k,null,w(N.value,t=>(i(),x(U,{key:t,label:t},{default:r(()=>[g("员工"+Z(t),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),n("button",{onClick:I,class:"group save"},be)]),n("div",fe,[l(K,{data:c(e).createBasePlan.data,border:"","cell-style":{borderColor:"#9db9d6",textAlign:"center"},"header-cell-style":{borderColor:"#9db9d6",background:"#d9e9f8",color:"#000",textAlign:"center",fontWeight:"500"},"row-key":"id",onSelectionChange:R,ref_key:"myTable",ref:v},{default:r(()=>[l(s,{type:"selection","reserve-selection":!0,label:"",width:"35",class:"one"}),l(s,{prop:"belongingProcess",label:"所属工序",width:"120"}),l(s,{prop:"productFamily",label:"产品族",width:"130"}),l(s,{prop:"processNumber",label:"工序ID",width:"110"}),l(s,{prop:"processName",label:"工序名称"}),l(s,{prop:"packagingMethod",label:"包装方式",width:"120"}),l(s,{prop:"standardTime",label:"标准工时",width:"120"}),l(s,{prop:"maxPersonnel",label:"人员Max",width:"120"}),l(s,{prop:"minPersonnel",label:"人员Min",width:"120"}),l(s,{prop:"employeeName",label:"员工姓名",width:"120"})]),_:1},8,["data"])])])}}},we=L(ye,[["__scopeId","data-v-1795ece3"]]);export{we as default};
