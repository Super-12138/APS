import{_ as U,aJ as z,q as A,s as F,r as _,v as O,aK as h,c as y,e as c,d as t,h as x,f,F as P,a4 as g,o as N,i as j,j as q,k as J,t as W,p as $,l as G,E as H}from"./index-ba92c6b8.js";import{E as L,a as Q}from"./el-table-column-fef6b0da.js";import"./el-checkbox-55ac5a6b.js";import"./el-scrollbar-7101c886.js";import{C as X}from"./CommonPlan-b2bd4878.js";import{P as Y}from"./Pagination-db504da4.js";import"./isEqual-3fc68a3b.js";const a=d=>($("data-v-02854cd0"),d=d(),G(),d),Z={class:"container"},ee=a(()=>t("span",{class:"first"},"新增",-1)),se=[ee],oe=a(()=>t("span",null,"修改",-1)),te=[oe],ae=a(()=>t("span",null,"删除",-1)),ne=[ae],ce=a(()=>t("span",null,"刷新",-1)),le=[ce],re=a(()=>t("span",null,"上移",-1)),de=[re],ie=a(()=>t("span",null,"下移",-1)),ue=[ie],pe=a(()=>t("button",null,[t("span",null,"导入")],-1)),_e=a(()=>t("button",null,[t("span",null,"导出")],-1)),me={class:"main"},he={class:"bottom"},fe={__name:"processName",setup(d){const o=z();A(),F();let m=_(1),i=_(20),u=!0;const k={id:"",processName:"",editable:!0},l=_([]);O(()=>{p()});function C(e){i.value=e,o.getProcessNamePoolsPages(m.value,i.value).then(s=>{console.log("获取分页表格数据成功")}).catch(s=>{})}function R(e){e.editable=!0}function B(){l.value.forEach(e=>{e.editable=!0})}function E(e){m.value=e,o.getProcessNamePoolsPages(e,i.value).then(s=>{console.log("获取分页表格数据成功")}).catch(s=>{})}function S(){const e=l.value;if(e.length!==1){g.alert("请选中一行移动","提示",{confirmButtonText:"好的"});return}const s=o.processNames.data.indexOf(e[0]);if(s>0){const n=o.processNames.data[s-1];o.processNames.data[s-1]=o.processNames.data[s],o.processNames.data[s]=n}}function w(){const e=l.value;if(e.length!==1){g.alert("请选中一行移动","提示",{confirmButtonText:"好的"});return}const s=o.processNames.data.indexOf(e[0]);if(s<o.processNames.data.length-1){const n=o.processNames.data[s+1];o.processNames.data[s+1]=o.processNames.data[s],o.processNames.data[s]=n}}function T(){if(u)o.processNames.data.push({...k}),u=!1;else return}function V(e){e.id?(o.updateProcessName({id:e.id,processName:e.processName}).then(s=>{console.log("工序名修改成功")}).catch(s=>{console.log(e.id),console.log("工序名修改失败")}),console.log("修改工序名"),e.editable=!1):(o.updateProcessName({processName:e.processName}).then(s=>{u=!0,console.log("工序添加成功"),p()}).catch(s=>{console.log(s),console.log("工序名添加失败")}),e.editable=!1)}function I(){const e=[];l.value.forEach(s=>{e.push(s.id)}),g.confirm("确定删除这些工序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{o.deleteProcessName(e).then(s=>{console.log("删除工序名成功"),h({type:"success",message:"删除成功"}),p()}).catch(s=>{console.log(s),console.log("批量删除工序名失败")})}).catch(()=>{h({type:"info",message:"取消删除"})})}function D(e){l.value=e}const b=_(null);function p(){u=!0,o.getProcessNamePoolsPages(m.value,i.value).then(e=>{console.log("查询所有工序名称",e),h({type:"success",message:"刷新成功"}),b.value.clearSelection()})}return(e,s)=>{const n=Q,K=H,M=L;return N(),y(P,null,[c(X,{class:"plan"}),t("div",Z,[t("div",{class:"head"},[t("button",{onClick:T},se),t("button",{onClick:B},te),t("button",{onClick:I},ne),t("button",{onClick:p},le),t("button",{onClick:S},de),t("button",{onClick:w},ue),pe,_e]),t("div",me,[c(M,{data:f(o).processNames.data,border:"","cell-style":{borderColor:"#9db9d6",textAlign:"center"},"header-cell-style":{borderColor:"#9db9d6",background:"#d9e9f8",color:"#000",textAlign:"center",fontWeight:"500"},"row-key":"id",onSelectionChange:D,onRowDblclick:R,ref_key:"myTable",ref:b,height:"62vh"},{default:x(()=>[c(n,{type:"selection","reserve-selection":!0,label:"",width:"35",class:"one"}),c(n,{prop:"id",label:"工序ID",width:"500"}),c(n,{prop:"processName",label:"工序名称"},{default:x(({row:r})=>[r.editable?(N(),j(K,{key:0,modelValue:r.processName,"onUpdate:modelValue":v=>r.processName=v,onKeyup:q(v=>V(r),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(N(),y(P,{key:1},[J(W(r.processName),1)],64))]),_:1})]),_:1},8,["data"])]),t("div",he,[c(Y,{total:f(o).processNames.pages,onChangePage:E,onUpdateSize:C,totalRows:f(o).processNames.total},null,8,["total","totalRows"])])])],64)}}},ke=U(fe,[["__scopeId","data-v-02854cd0"]]);export{ke as default};
