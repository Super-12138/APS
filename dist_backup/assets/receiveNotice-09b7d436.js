import{_ as z,r as f,aJ as D,bm as F,q as j,s as q,v as J,aK as S,c as i,e as n,d as o,h as d,f as B,F as r,a4 as I,o as a,i as p,j as _,k as h,t as v,p as W,l as G,E as H}from"./index-ba92c6b8.js";import{E as L,a as O}from"./el-table-column-fef6b0da.js";import"./el-checkbox-55ac5a6b.js";import"./el-scrollbar-7101c886.js";import{C as X}from"./CommonPlan-b2bd4878.js";import{P as Y}from"./Pagination-db504da4.js";import"./isEqual-3fc68a3b.js";const k=Q=>(W("data-v-85145b25"),Q=Q(),G(),Q),Z={class:"container"},w=k(()=>o("span",{class:"first"},"新增",-1)),ee=[w],te=k(()=>o("span",null,"修改",-1)),le=[te],ae=k(()=>o("span",null,"删除",-1)),oe=[ae],se=k(()=>o("span",null,"刷新",-1)),ne=[se],ue=k(()=>o("button",null,[o("span",null,"导入")],-1)),ce=k(()=>o("button",null,[o("span",null,"导出")],-1)),ie={class:"main"},de={class:"bottom"},re={__name:"receiveNotice",setup(Q){let N=f(1),g=f(20);D();const u=F();j(),q();function U(t){g.value=t,u.getAllPage(N.value,g.value,8).then(s=>{console.log("获取分页表格数据成功")}).catch(s=>{})}f([]),f([]);let V=!0;const C={result:{billNo:"",materialId:"",materialName:"",mustQty:"",checkQty:"",receiveQty:"",csnReceiveBaseQty:"",inStockQty:""},chVersion:"",editable:!0},R=f([]);J(()=>{b()});function x(t){t.editable=!0}function E(){R.value.forEach(t=>{t.editable=!0})}const K=f(null);function P(){if(V)u.receiveNotice.data.unshift({...C}),V=!1;else return}function m(t){t.result.id?(u.update({id:t.result.id,billNo:t.result.billNo,materialId:t.result.materialId,materialName:t.result.materialName,mustQty:t.result.mustQty,checkQty:t.result.checkQty,receiveQty:t.result.receiveQty,csnReceiveBaseQty:t.result.csnReceiveBaseQty,inStockQty:t.result.inStockQty},8).then(s=>{console.log("产能修改成功")}).catch(s=>{b(),console.log(t.id),console.log("产能修改失败")}),t.editable=!1):(u.add({billNo:t.result.billNo,materialId:t.result.materialId,materialName:t.result.materialName,mustQty:t.result.mustQty,checkQty:t.result.checkQty,receiveQty:t.result.receiveQty,csnReceiveBaseQty:t.result.csnReceiveBaseQty,inStockQty:t.result.inStockQty},8).then(s=>{V=!0,s.code==200?console.log("产能添加成功"):I.alert("数据不能为空","添加数据失败",{confirmButtonText:"好"}),b()}).catch(s=>{console.log(s),console.log("产能添加失败"),b()}),t.editable=!1)}function T(t){N.value=t,u.getAllPage(t,g.value,8).then(s=>{console.log("获取分页表格数据成功")}).catch(s=>{})}function $(){const t=[];R.value.forEach(s=>{t.push(s.result.id)}),I.confirm("确定删除这些工序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{u.deleteData(t,8).then(s=>{console.log("删除产能成功"),S({type:"success",message:"删除成功"}),b()}).catch(s=>{console.log(s),console.log("批量删除产能失败")})}).catch(()=>{S({type:"info",message:"取消删除"})})}function A(t){R.value=t}function b(){V=!0,u.getAllPage(N.value,g.value,8).then(t=>{S({type:"success",message:"刷新成功"}),K.value.clearSelection()}).catch(t=>{}),console.log("查询所有工序产能")}return(t,s)=>{const c=O,y=H,M=L;return a(),i(r,null,[n(X,{class:"plan"}),o("div",Z,[o("div",{class:"head"},[o("button",{onClick:P},ee),o("button",{onClick:E},le),o("button",{onClick:$},oe),o("button",{onClick:b},ne),ue,ce]),o("div",ie,[n(M,{data:B(u).receiveNotice.data,border:"","cell-style":{borderColor:"#9db9d6",textAlign:"center"},"header-cell-style":{borderColor:"#9db9d6",background:"#d9e9f8",color:"#000",textAlign:"center",fontWeight:"500"},"row-key":"id",onSelectionChange:A,onRowDblclick:x,height:"62vh",ref_key:"myTable",ref:K},{default:d(()=>[n(c,{type:"selection","reserve-selection":!0,label:"",width:"35",class:"one"}),n(c,{prop:"result.billNo",label:"单据编号",width:"150"},{default:d(({row:e})=>[e.editable?(a(),p(y,{key:0,modelValue:e.result.billNo,"onUpdate:modelValue":l=>e.result.billNo=l,onKeyup:_(l=>m(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),i(r,{key:1},[h(v(e.result.billNo),1)],64))]),_:1}),n(c,{prop:"result.materialId",label:"物料编码",width:"120"},{default:d(({row:e})=>[e.editable?(a(),p(y,{key:0,modelValue:e.result.materialId,"onUpdate:modelValue":l=>e.result.materialId=l,onKeyup:_(l=>m(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),i(r,{key:1},[h(v(e.result.materialId),1)],64))]),_:1}),n(c,{prop:"result.materialName",label:"物料名称"},{default:d(({row:e})=>[e.editable?(a(),p(y,{key:0,modelValue:e.result.materialName,"onUpdate:modelValue":l=>e.result.materialName=l,onKeyup:_(l=>m(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),i(r,{key:1},[h(v(e.result.materialName),1)],64))]),_:1}),n(c,{prop:"result.mustQty",label:"实收数量",width:"120"},{default:d(({row:e})=>[e.editable?(a(),p(y,{key:0,modelValue:e.result.mustQty,"onUpdate:modelValue":l=>e.result.mustQty=l,onKeyup:_(l=>m(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),i(r,{key:1},[h(v(e.result.mustQty),1)],64))]),_:1}),n(c,{prop:"result.checkQty",label:"检测数量",width:"120"},{default:d(({row:e})=>[e.editable?(a(),p(y,{key:0,modelValue:e.result.checkQty,"onUpdate:modelValue":l=>e.result.checkQty=l,onKeyup:_(l=>m(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),i(r,{key:1},[h(v(e.result.checkQty),1)],64))]),_:1}),n(c,{prop:"result.receiveQty",label:"合格数量",width:"120"},{default:d(({row:e})=>[e.editable?(a(),p(y,{key:0,modelValue:e.result.receiveQty,"onUpdate:modelValue":l=>e.result.receiveQty=l,onKeyup:_(l=>m(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),i(r,{key:1},[h(v(e.result.receiveQty),1)],64))]),_:1}),n(c,{prop:"result.csnReceiveBaseQty",label:"让步接收数量(基本数量)",width:"90"},{default:d(({row:e})=>[e.editable?(a(),p(y,{key:0,modelValue:e.result.csnReceiveBaseQty,"onUpdate:modelValue":l=>e.result.csnReceiveBaseQty=l,onKeyup:_(l=>m(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),i(r,{key:1},[h(v(e.result.csnReceiveBaseQty),1)],64))]),_:1}),n(c,{prop:"result.inStockQty",label:"入库数量",width:"150"},{default:d(({row:e})=>[e.editable?(a(),p(y,{key:0,modelValue:e.result.inStockQty,"onUpdate:modelValue":l=>e.result.inStockQty=l,onKeyup:_(l=>m(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),i(r,{key:1},[h(v(e.result.inStockQty),1)],64))]),_:1}),n(c,{prop:"chVersion",label:"版本号",width:"100"})]),_:1},8,["data"])]),o("div",de,[n(Y,{total:B(u).receiveNotice.pages,onChangePage:T,onUpdateSize:U,totalRows:B(u).receiveNotice.total},null,8,["total","totalRows"])])])],64)}}},fe=z(re,[["__scopeId","data-v-85145b25"]]);export{fe as default};
