import{_ as O,r as k,aJ as P,bm as D,q as z,s as F,v as j,aK as C,c as d,e as o,d as n,h as i,f as U,F as r,a4 as N,o as a,i as m,j as y,k as b,t as _,p as J,l as W,E as G}from"./index-ba92c6b8.js";import{E as H,a as L}from"./el-table-column-fef6b0da.js";import"./el-checkbox-55ac5a6b.js";import"./el-scrollbar-7101c886.js";import{C as X}from"./CommonPlan-b2bd4878.js";import{P as Y}from"./Pagination-db504da4.js";import"./isEqual-3fc68a3b.js";const V=I=>(J("data-v-d5622c0d"),I=I(),W(),I),Z={class:"container"},w=V(()=>n("span",{class:"first"},"新增",-1)),ee=[w],le=V(()=>n("span",null,"修改",-1)),te=[le],ae=V(()=>n("span",null,"删除",-1)),oe=[ae],ne=V(()=>n("span",null,"刷新",-1)),ue=[ne],se=V(()=>n("button",null,[n("span",null,"导入")],-1)),de=V(()=>n("button",null,[n("span",null,"导出")],-1)),ie={class:"main"},re={class:"bottom"},pe={__name:"productionOrder",setup(I){let T=k(1),g=k(20);P();const h=D();z(),F();function S(l){g.value=l,h.getAllPage(T.value,g.value,5).then(u=>{console.log("获取分页表格数据成功")}).catch(u=>{})}k([]),k([]);let v=!0;const Q={result:{plannedCompletionTime:"",materialName:"",billNo:"",status:"",pickMtrlStatus:"",bomId:"",billType:"",materialId:"",stockInQuaAuxQty:"",billTypeId:"",qty:""},chVersion:"",editable:!0},K=k([]);j(()=>{f()});function A(l){l.editable=!0}function M(){K.value.forEach(l=>{l.editable=!0})}const x=k(null);function R(){if(v)h.productionOrder.data.unshift({...Q}),v=!1;else return}function p(l){l.result.id?(h.update({id:l.result.id,plannedCompletionTime:l.result.plannedCompletionTime,materialName:l.result.materialName,billNo:l.result.billNo,status:l.result.status,pickMtrlStatus:l.result.pickMtrlStatus,bomId:l.result.bomId,billType:l.result.billType,materialId:l.result.materialId,stockInQuaAuxQty:l.result.stockInQuaAuxQty,billTypeId:l.result.billTypeId,qty:l.result.qty},5).then(u=>{console.log("产能修改成功")}).catch(u=>{f(),console.log(l.id),console.log("产能修改失败")}),l.editable=!1):(h.add({plannedCompletionTime:l.result.plannedCompletionTime,materialName:l.result.materialName,billNo:l.result.billNo,status:l.result.status,pickMtrlStatus:l.result.pickMtrlStatus,bomId:l.result.bomId,billType:l.result.billType,materialId:l.result.materialId,stockInQuaAuxQty:l.result.stockInQuaAuxQty,billTypeId:l.result.billTypeId,qty:l.result.qty},5).then(u=>{v=!0,u.code==200?console.log("产能添加成功"):N.alert("数据不能为空","添加数据失败",{confirmButtonText:"好"}),f()}).catch(u=>{console.log(u),console.log("产能添加失败"),f()}),l.editable=!1)}function $(l){T.value=l,h.getAllPage(l,g.value,5).then(u=>{console.log("获取分页表格数据成功")}).catch(u=>{})}function q(){const l=[];K.value.forEach(u=>{l.push(u.result.id)}),N.confirm("确定删除这些工序吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{h.deleteData(l,5).then(u=>{console.log("删除产能成功"),C({type:"success",message:"删除成功"}),f()}).catch(u=>{console.log(u),console.log("批量删除产能失败")})}).catch(()=>{C({type:"info",message:"取消删除"})})}function B(l){K.value=l}function f(){v=!0,h.getAllPage(T.value,g.value,5).then(l=>{C({type:"success",message:"刷新成功"}),x.value.clearSelection()}).catch(l=>{}),console.log("查询所有工序产能")}return(l,u)=>{const s=L,c=G,E=H;return a(),d(r,null,[o(X,{class:"plan"}),n("div",Z,[n("div",{class:"head"},[n("button",{onClick:R},ee),n("button",{onClick:M},te),n("button",{onClick:q},oe),n("button",{onClick:f},ue),se,de]),n("div",ie,[o(E,{data:U(h).productionOrder.data,border:"","cell-style":{borderColor:"#9db9d6",textAlign:"center"},"header-cell-style":{borderColor:"#9db9d6",background:"#d9e9f8",color:"#000",textAlign:"center",fontWeight:"500"},"row-key":"id",onSelectionChange:B,onRowDblclick:A,height:"62vh",ref_key:"myTable",ref:x},{default:i(()=>[o(s,{type:"selection","reserve-selection":!0,label:"",width:"35",class:"one"}),o(s,{prop:"result.billNo",label:"单据编号",width:"150"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.billNo,"onUpdate:modelValue":t=>e.result.billNo=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.billNo),1)],64))]),_:1}),o(s,{prop:"result.billType",label:"单据类型",width:"150"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.billType,"onUpdate:modelValue":t=>e.result.billType=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.billType),1)],64))]),_:1}),o(s,{prop:"result.billTypeId",label:"单据类型ID",width:"150"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.billTypeId,"onUpdate:modelValue":t=>e.result.billTypeId=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.billTypeId),1)],64))]),_:1}),o(s,{prop:"result.materialId",label:"物料编码",width:"110"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.materialId,"onUpdate:modelValue":t=>e.result.materialId=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.materialId),1)],64))]),_:1}),o(s,{prop:"result.materialName",label:"物料名称",width:"250"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.materialName,"onUpdate:modelValue":t=>e.result.materialName=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.materialName),1)],64))]),_:1}),o(s,{prop:"result.qty",label:"数量",width:"80"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.qty,"onUpdate:modelValue":t=>e.result.qty=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.qty),1)],64))]),_:1}),o(s,{prop:"result.status",label:"业务状态",width:"85"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.status,"onUpdate:modelValue":t=>e.result.status=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.status),1)],64))]),_:1}),o(s,{prop:"result.pickMtrlStatus",label:"领料状态",width:"90"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.pickMtrlStatus,"onUpdate:modelValue":t=>e.result.pickMtrlStatus=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.pickMtrlStatus),1)],64))]),_:1}),o(s,{prop:"result.stockInQuaAuxQty",label:"合格品入库数量",width:"90"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.stockInQuaAuxQty,"onUpdate:modelValue":t=>e.result.stockInQuaAuxQty=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.stockInQuaAuxQty),1)],64))]),_:1}),o(s,{prop:"result.bomId",label:"BOM版本",width:"150"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.bomId,"onUpdate:modelValue":t=>e.result.bomId=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.bomId),1)],64))]),_:1}),o(s,{prop:"result.plannedCompletionTime",label:"计划完成时间",width:"180"},{default:i(({row:e})=>[e.editable?(a(),m(c,{key:0,modelValue:e.result.plannedCompletionTime,"onUpdate:modelValue":t=>e.result.plannedCompletionTime=t,onKeyup:y(t=>p(e),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(a(),d(r,{key:1},[b(_(e.result.plannedCompletionTime),1)],64))]),_:1}),o(s,{prop:"chVersion",label:"版本号",width:"100"})]),_:1},8,["data"])]),n("div",re,[o(Y,{total:U(h).productionOrder.pages,onChangePage:$,onUpdateSize:S,totalRows:U(h).productionOrder.total},null,8,["total","totalRows"])])])],64)}}},ke=O(pe,[["__scopeId","data-v-d5622c0d"]]);export{ke as default};
