import{c1 as le,bo as W,c2 as ie,x as Y,G as j,z as A,ak as ce,A as ae,bl as ue,r as v,$ as _,aZ as fe,bV as $,aD as U,o as L,i as D,h as ne,N as de,d as X,B as M,f as b,n as F,O as me,T as ve,Q as se,c as re,e as K,F as pe,y as he,aO as N,c3 as V,w as q,a_ as ge,R as G,aq as ye,I as be,b as Se,bQ as we,C as Ee,as as Te,D as ze,W as ke,H as xe,bS as _e}from"./index-ba92c6b8.js";var He=/\s/;function Ce(e){for(var a=e.length;a--&&He.test(e.charAt(a)););return a}var Re=/^\s+/;function Be(e){return e&&e.slice(0,Ce(e)+1).replace(Re,"")}var Q=0/0,Ne=/^[-+]0x[0-9a-f]+$/i,Le=/^0b[01]+$/i,Me=/^0o[0-7]+$/i,Oe=parseInt;function Z(e){if(typeof e=="number")return e;if(le(e))return Q;if(W(e)){var a=typeof e.valueOf=="function"?e.valueOf():e;e=W(a)?a+"":a}if(typeof e!="string")return e===0?e:+e;e=Be(e);var s=Le.test(e);return s||Me.test(e)?Oe(e.slice(2),s?2:8):Ne.test(e)?Q:+e}var Pe=function(){return ie.Date.now()};const I=Pe;var Ae="Expected a function",Ie=Math.max,We=Math.min;function tt(e,a,s){var r,c,f,i,u,o,m=0,p=!1,l=!1,h=!0;if(typeof e!="function")throw new TypeError(Ae);a=Z(a)||0,W(s)&&(p=!!s.leading,l="maxWait"in s,f=l?Ie(Z(s.maxWait)||0,a):f,h="trailing"in s?!!s.trailing:h);function g(n){var t=r,d=c;return r=c=void 0,m=n,i=e.apply(d,t),i}function S(n){return m=n,u=setTimeout(w,a),p?g(n):i}function H(n){var t=n-o,d=n-m,y=a-t;return l?We(y,f-d):y}function k(n){var t=n-o,d=n-m;return o===void 0||t>=a||t<0||l&&d>=f}function w(){var n=I();if(k(n))return E(n);u=setTimeout(w,H(n))}function E(n){return u=void 0,h&&r?g(n):(r=c=void 0,i)}function C(){u!==void 0&&clearTimeout(u),m=0,r=o=c=u=void 0}function R(){return u===void 0?i:E(I())}function T(){var n=I(),t=k(n);if(r=arguments,c=this,o=n,t){if(u===void 0)return S(o);if(l)return clearTimeout(u),u=setTimeout(w,a),g(o)}return u===void 0&&(u=setTimeout(w,a)),i}return T.cancel=C,T.flush=R,T}const x=4,$e={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},De=({move:e,size:a,bar:s})=>({[s.size]:a,transform:`translate${s.axis}(${e}%)`}),oe=Symbol("scrollbarContextKey"),Xe=Y({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Fe="Thumb",Ye=A({__name:"thumb",props:Xe,setup(e){const a=e,s=ce(oe),r=ae("scrollbar");s||ue(Fe,"can not inject scrollbar context");const c=v(),f=v(),i=v({}),u=v(!1);let o=!1,m=!1,p=se?document.onselectstart:null;const l=_(()=>$e[a.vertical?"vertical":"horizontal"]),h=_(()=>De({size:a.size,move:a.move,bar:l.value})),g=_(()=>c.value[l.value.offset]**2/s.wrapElement[l.value.scrollSize]/a.ratio/f.value[l.value.offset]),S=n=>{var t;if(n.stopPropagation(),n.ctrlKey||[1,2].includes(n.button))return;(t=window.getSelection())==null||t.removeAllRanges(),k(n);const d=n.currentTarget;d&&(i.value[l.value.axis]=d[l.value.offset]-(n[l.value.client]-d.getBoundingClientRect()[l.value.direction]))},H=n=>{if(!f.value||!c.value||!s.wrapElement)return;const t=Math.abs(n.target.getBoundingClientRect()[l.value.direction]-n[l.value.client]),d=f.value[l.value.offset]/2,y=(t-d)*100*g.value/c.value[l.value.offset];s.wrapElement[l.value.scroll]=y*s.wrapElement[l.value.scrollSize]/100},k=n=>{n.stopImmediatePropagation(),o=!0,document.addEventListener("mousemove",w),document.addEventListener("mouseup",E),p=document.onselectstart,document.onselectstart=()=>!1},w=n=>{if(!c.value||!f.value||o===!1)return;const t=i.value[l.value.axis];if(!t)return;const d=(c.value.getBoundingClientRect()[l.value.direction]-n[l.value.client])*-1,y=f.value[l.value.offset]-t,B=(d-y)*100*g.value/c.value[l.value.offset];s.wrapElement[l.value.scroll]=B*s.wrapElement[l.value.scrollSize]/100},E=()=>{o=!1,i.value[l.value.axis]=0,document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",E),T(),m&&(u.value=!1)},C=()=>{m=!1,u.value=!!a.size},R=()=>{m=!0,u.value=o};fe(()=>{T(),document.removeEventListener("mouseup",E)});const T=()=>{document.onselectstart!==p&&(document.onselectstart=p)};return $(U(s,"scrollbarElement"),"mousemove",C),$(U(s,"scrollbarElement"),"mouseleave",R),(n,t)=>(L(),D(ve,{name:b(r).b("fade"),persisted:""},{default:ne(()=>[de(X("div",{ref_key:"instance",ref:c,class:M([b(r).e("bar"),b(r).is(b(l).key)]),onMousedown:H},[X("div",{ref_key:"thumb",ref:f,class:M(b(r).e("thumb")),style:F(b(h)),onMousedown:S},null,38)],34),[[me,n.always||u.value]])]),_:1},8,["name"]))}});var J=j(Ye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const je=Y({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Ue=A({__name:"bar",props:je,setup(e,{expose:a}){const s=e,r=v(0),c=v(0);return a({handleScroll:i=>{if(i){const u=i.offsetHeight-x,o=i.offsetWidth-x;c.value=i.scrollTop*100/u*s.ratioY,r.value=i.scrollLeft*100/o*s.ratioX}}}),(i,u)=>(L(),re(pe,null,[K(J,{move:r.value,ratio:i.ratioX,size:i.width,always:i.always},null,8,["move","ratio","size","always"]),K(J,{move:c.value,ratio:i.ratioY,size:i.height,vertical:"",always:i.always},null,8,["move","ratio","size","always"])],64))}});var Ke=j(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Ve=Y({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:he([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),qe={scroll:({scrollTop:e,scrollLeft:a})=>[e,a].every(N)},Ge="ElScrollbar",Qe=A({name:Ge}),Ze=A({...Qe,props:Ve,emits:qe,setup(e,{expose:a,emit:s}){const r=e,c=ae("scrollbar");let f,i;const u=v(),o=v(),m=v(),p=v("0"),l=v("0"),h=v(),g=v(1),S=v(1),H=_(()=>{const t={};return r.height&&(t.height=V(r.height)),r.maxHeight&&(t.maxHeight=V(r.maxHeight)),[r.wrapStyle,t]}),k=_(()=>[r.wrapClass,c.e("wrap"),{[c.em("wrap","hidden-default")]:!r.native}]),w=_(()=>[c.e("view"),r.viewClass]),E=()=>{var t;o.value&&((t=h.value)==null||t.handleScroll(o.value),s("scroll",{scrollTop:o.value.scrollTop,scrollLeft:o.value.scrollLeft}))};function C(t,d){ke(t)?o.value.scrollTo(t):N(t)&&N(d)&&o.value.scrollTo(t,d)}const R=t=>{N(t)&&(o.value.scrollTop=t)},T=t=>{N(t)&&(o.value.scrollLeft=t)},n=()=>{if(!o.value)return;const t=o.value.offsetHeight-x,d=o.value.offsetWidth-x,y=t**2/o.value.scrollHeight,B=d**2/o.value.scrollWidth,O=Math.max(y,r.minSize),P=Math.max(B,r.minSize);g.value=y/(t-y)/(O/(t-O)),S.value=B/(d-B)/(P/(d-P)),l.value=O+x<t?`${O}px`:"",p.value=P+x<d?`${P}px`:""};return q(()=>r.noresize,t=>{t?(f==null||f(),i==null||i()):({stop:f}=ge(m,n),i=$("resize",n))},{immediate:!0}),q(()=>[r.maxHeight,r.height],()=>{r.native||G(()=>{var t;n(),o.value&&((t=h.value)==null||t.handleScroll(o.value))})}),ye(oe,be({scrollbarElement:u,wrapElement:o})),Se(()=>{r.native||G(()=>{n()})}),we(()=>n()),a({wrapRef:o,update:n,scrollTo:C,setScrollTop:R,setScrollLeft:T,handleScroll:E}),(t,d)=>(L(),re("div",{ref_key:"scrollbarRef",ref:u,class:M(b(c).b())},[X("div",{ref_key:"wrapRef",ref:o,class:M(b(k)),style:F(b(H)),onScroll:E},[(L(),D(Te(t.tag),{ref_key:"resizeRef",ref:m,class:M(b(w)),style:F(t.viewStyle)},{default:ne(()=>[Ee(t.$slots,"default")]),_:3},8,["class","style"]))],38),t.native?ze("v-if",!0):(L(),D(Ke,{key:0,ref_key:"barRef",ref:h,height:l.value,width:p.value,always:t.always,"ratio-x":S.value,"ratio-y":g.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Je=j(Ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const at=xe(Je),z=new Map;let ee;se&&(document.addEventListener("mousedown",e=>ee=e),document.addEventListener("mouseup",e=>{for(const a of z.values())for(const{documentHandler:s}of a)s(e,ee)}));function te(e,a){let s=[];return Array.isArray(a.arg)?s=a.arg:_e(a.arg)&&s.push(a.arg),function(r,c){const f=a.instance.popperRef,i=r.target,u=c==null?void 0:c.target,o=!a||!a.instance,m=!i||!u,p=e.contains(i)||e.contains(u),l=e===i,h=s.length&&s.some(S=>S==null?void 0:S.contains(i))||s.length&&s.includes(u),g=f&&(f.contains(i)||f.contains(u));o||m||p||l||h||g||a.value(r,c)}}const nt={beforeMount(e,a){z.has(e)||z.set(e,[]),z.get(e).push({documentHandler:te(e,a),bindingFn:a.value})},updated(e,a){z.has(e)||z.set(e,[]);const s=z.get(e),r=s.findIndex(f=>f.bindingFn===a.oldValue),c={documentHandler:te(e,a),bindingFn:a.value};r>=0?s.splice(r,1,c):s.push(c)},unmounted(e){z.delete(e)}};export{nt as C,at as E,tt as d,Z as t};
