import{P as N}from"./Pagination-db504da4.js";import{_ as V,aJ as L,q as T,s as K,r as h,v as z,c as f,e as t,d as l,h as d,f as _,F as P,aK as F,o as m,t as g,i as U,j as $,k as A,p as D,l as j,E as q}from"./index-ba92c6b8.js";import{E as J,a as O}from"./el-table-column-fef6b0da.js";import"./el-checkbox-55ac5a6b.js";import"./el-scrollbar-7101c886.js";import{C as W}from"./CommonPlan-b2bd4878.js";import"./isEqual-3fc68a3b.js";const v=c=>(D("data-v-27e01a93"),c=c(),j(),c),G={class:"container"},H=v(()=>l("span",{class:"first"},"刷新",-1)),Q=[H],X=v(()=>l("button",null,[l("span",null,"导出")],-1)),Y={class:"main"},Z=["onClick"],ee=["onClick"],te={class:"bottom"},ae={__name:"lastPlan",setup(c){const n=L();T();const b=K();function w(e){e.editable=!0}let u=h(1),r=h(20);function y(e){n.getProcessSchemeById(e.id).then(o=>{}).catch(o=>{}),b.push({path:"/viewBasePlan"})}function p(){n.getProcessSchemeManagement(u.value,r.value).then(e=>{F({type:"success",message:"刷新成功"}),console.log("查询所有最终工序列表")}).catch(e=>{})}function C(e){n.getProcessSchemeById(e.optimalId).then(o=>{b.push({path:"/viewBasePlan"})}).catch(o=>{})}const S=h([]);z(()=>{p()});function k(e){r.value=e,n.getProcessSchemeManagement(u.value,r.value).then(o=>{console.log("获取分页表格数据成功")}).catch(o=>{})}function B(e){u.value=e,n.getProcessSchemeManagement(e,r.value).then(o=>{console.log("获取分页表格数据成功")}).catch(o=>{})}function R(e){S.value=e}function x(e){n.updateProcessSchemeManagement(e).then(o=>{console.log("更改最终工艺方案成功"),p()}).catch(o=>{}),e.editable=!1}return(e,o)=>{const s=O,I=q,E=J,M=N;return m(),f(P,null,[t(W,{class:"plan"}),l("div",G,[l("div",{class:"head"},[l("button",{onClick:p},Q),X]),l("div",Y,[t(E,{data:_(n).lastPlanList.data,border:"","cell-style":{borderColor:"#9db9d6",textAlign:"center"},"header-cell-style":{borderColor:"#9db9d6",background:"#d9e9f8",color:"#000",textAlign:"center",fontWeight:"500"},"row-key":"id",onSelectionChange:R,onRowDblclick:w,height:"63vh"},{default:d(()=>[t(s,{prop:"productFamily",label:"产品族",width:"150"}),t(s,{prop:"currentProcessScheme",label:"当前工艺方案",width:"200"},{default:d(a=>[l("a",{onClick:i=>y(a.row)},g(a.row.currentProcessScheme),9,Z)]),_:1}),t(s,{prop:"optimalProcessPlan",label:"最优工艺方案",width:"200"},{default:d(a=>[l("a",{onClick:i=>C(a.row)},g(a.row.optimalProcessPlan),9,ee)]),_:1}),t(s,{prop:"orderNumber",label:"经济批量",width:"120"},{default:d(({row:a})=>[a.editable?(m(),U(I,{key:0,modelValue:a.orderNumber,"onUpdate:modelValue":i=>a.orderNumber=i,onKeyup:$(i=>x(a),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])):(m(),f(P,{key:1},[A(g(a.orderNumber),1)],64))]),_:1}),t(s,{prop:"number",label:"人数",width:"120"}),t(s,{prop:"productionLineBalanceRate",label:"产线平衡率",width:"120"}),t(s,{prop:"completionTime",label:"完成时间(h)",width:"120"}),t(s,{prop:"releasableStaffCount",label:"可以释放人数",width:"120"}),t(s,{prop:"totalReleaseTime",label:"释放总时间(h)"})]),_:1},8,["data"])]),l("div",te,[t(M,{total:_(n).lastPlanList.totalPages,onChangePage:B,onUpdateSize:k,totalRows:_(n).lastPlanList.total},null,8,["total","totalRows"])])])],64)}}},de=V(ae,[["__scopeId","data-v-27e01a93"]]);export{de as default};
