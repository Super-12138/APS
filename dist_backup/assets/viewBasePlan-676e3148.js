import{_ as L,aJ as $,q as j,s as q,aL as z,r as m,$ as G,c as f,d as n,e as a,h as r,f as d,N as J,a3 as O,j as W,a4 as B,aM as H,o as u,F as E,a2 as k,k as v,p as Q,l as X,a7 as Y,i as x,t as Z}from"./index-ba92c6b8.js";import{E as ee,a as le}from"./el-table-column-fef6b0da.js";import"./el-checkbox-55ac5a6b.js";import"./el-scrollbar-7101c886.js";import{a as ae,E as oe}from"./el-radio-eee1d8c4.js";import{E as te,a as se}from"./el-select-e5188bed.js";import"./isEqual-3fc68a3b.js";const _=p=>(Q("data-v-4b79d892"),p=p(),X(),p),ne={class:"container"},re={class:"head"},ce=_(()=>n("span",null,"产品族:",-1)),de=_(()=>n("span",null,"人数：",-1)),ie=["onKeyup"],ue=_(()=>n("span",null,"分组",-1)),pe=[ue],me={class:"dialog-footer"},_e=_(()=>n("span",null,"保存",-1)),be=[_e],ye={class:"main"},fe={__name:"viewBasePlan",setup(p){const o=$();j();const V=q(),h=z();function C(){o.getProcessCapacityByProductFamily(o.createBasePlan.productFamily).then(t=>{const e=document.getElementById("selectNumber"),i=document.getElementById("selectProductFamily");o.createBasePlan.Edited=!0,e.disabled=!0,i.disabled=!0}).catch(t=>{})}const c=m(!1),b=m();function F(){o.getAllProductFamily().then(t=>{console.log("点开了产品族的下拉框")}).catch(t=>{})}const g=m([]),N=G(()=>Array.from({length:o.viewBasePlan.number},(t,e)=>e+1)),w=m(null);function S(){const t="员工"+b.value;g.value.forEach(e=>{e.employeeName=t}),w.value.clearSelection(),c.value=!1}const T=()=>{c.value=!1};function M(){c.value=!0}function I(){o.updateProcessScheme(o.viewBasePlan.data).then(t=>{t.code==200&&B.alert("保存成功了","保存成功",{type:"success",confirmButtonText:"好的",callback:e=>{V.back();let i=h.tabsList.find(y=>y.name==="viewBasePlan");h.closeTab(i)}}),t.code==201&&B.alert(t.message,"无法保存",{type:"error",confirmButtonText:"好的"})}).catch(t=>{}),console.log(o.viewBasePlan.data,"111")}function R(t){g.value=t}return(t,e)=>{const i=se,y=te,U=oe,A=ae,P=Y,D=H,s=le,K=ee;return u(),f("div",ne,[n("div",re,[ce,a(y,{class:"product",id:"selectProductFamily",modelValue:d(o).viewBasePlan.productFamily,"onUpdate:modelValue":e[0]||(e[0]=l=>d(o).viewBasePlan.productFamily=l),placeholder:"Select",onClick:F,disabled:""},{default:r(()=>[(u(!0),f(E,null,k(d(o).productFamily,l=>(u(),x(i,{key:l,label:l,value:l},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),de,J(n("input",{id:"selectNumber",type:"number","onUpdate:modelValue":e[1]||(e[1]=l=>d(o).viewBasePlan.number=l),onKeyup:W(C,["enter"]),disabled:""},null,40,ie),[[O,d(o).viewBasePlan.number]]),n("button",{onClick:M,class:"group fengzu"},pe),a(D,{class:"employee",modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=l=>c.value=l),title:"请选择你的员工",width:"30%","before-close":T},{footer:r(()=>[n("span",me,[a(P,{onClick:e[3]||(e[3]=l=>c.value=!1)},{default:r(()=>[v("取消")]),_:1}),a(P,{type:"primary",onClick:S},{default:r(()=>[v(" 确定 ")]),_:1})])]),default:r(()=>[a(A,{modelValue:b.value,"onUpdate:modelValue":e[2]||(e[2]=l=>b.value=l)},{default:r(()=>[(u(!0),f(E,null,k(N.value,l=>(u(),x(U,{key:l,label:l},{default:r(()=>[v("员工"+Z(l),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["modelValue"]),n("button",{onClick:I,class:"group save"},be)]),n("div",ye,[a(K,{data:d(o).viewBasePlan.data,border:"","cell-style":{borderColor:"#9db9d6",textAlign:"center"},"header-cell-style":{borderColor:"#9db9d6",background:"#d9e9f8",color:"#000",textAlign:"center",fontWeight:"500"},"row-key":"id",onSelectionChange:R,ref_key:"myTable",ref:w},{default:r(()=>[a(s,{type:"selection","reserve-selection":!0,label:"",width:"35",class:"one"}),a(s,{prop:"belongingProcess",label:"所属工序",width:"120"}),a(s,{prop:"productFamily",label:"产品族",width:"130"}),a(s,{prop:"processNumber",label:"工序ID",width:"110"}),a(s,{prop:"processName",label:"工序名称"}),a(s,{prop:"packagingMethod",label:"包装方式",width:"120"}),a(s,{prop:"standardTime",label:"标准工时",width:"120"}),a(s,{prop:"maxPersonnel",label:"人员Max",width:"120"}),a(s,{prop:"minPersonnel",label:"人员Min",width:"120"}),a(s,{prop:"employeeName",label:"员工姓名",width:"120"})]),_:1},8,["data"])])])}}},ke=L(fe,[["__scopeId","data-v-4b79d892"]]);export{ke as default};
