import{x as ge,y as be,z as ee,A as ye,o as x,c as B,B as Z,f as A,C as le,k as S,t as J,D as P,d as o,n as N,G as ke,H as Ce,r as k,I as xe,J as Ve,K as Se,L as Be,M as I,h as u,N as w,e as n,O as Ee,T as M,P as U,Q as we,R as de,S as ue,U as T,V as te,W as ce,X as Ie,Y as Te,_ as Le,Z as Ae,w as $e,$ as q,a0 as Oe,i as Pe,a1 as Ne,F as ae,a2 as se,a3 as L,a4 as E,a5 as Me,a6 as Ue,a7 as Re,a8 as ze,a9 as De,p as Fe,l as Ge}from"./index-ba92c6b8.js";import{E as Ke,a as je}from"./el-radio-eee1d8c4.js";import{E as Qe,a as Ye}from"./el-checkbox-55ac5a6b.js";import"./isEqual-3fc68a3b.js";const He=ge({header:{type:String,default:""},bodyStyle:{type:be([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),We=ee({name:"ElCard"}),Ze=ee({...We,props:He,setup(a){const e=ye("card");return(t,l)=>(x(),B("div",{class:Z([A(e).b(),A(e).is(`${t.shadow}-shadow`)])},[t.$slots.header||t.header?(x(),B("div",{key:0,class:Z(A(e).e("header"))},[le(t.$slots,"header",{},()=>[S(J(t.header),1)])],2)):P("v-if",!0),o("div",{class:Z([A(e).e("body"),t.bodyClass]),style:N(t.bodyStyle)},[le(t.$slots,"default")],6)],2))}});var qe=ke(Ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const Je=Ce(qe);function Xe(a){let e;const t=k(!1),l=xe({...a,originalPosition:"",originalOverflow:"",visible:!1});function v(c){l.text=c}function i(){const c=l.parent,h=g.ns;if(!c.vLoadingAddClassList){let b=c.getAttribute("loading-number");b=Number.parseInt(b)-1,b?c.setAttribute("loading-number",b.toString()):(U(c,h.bm("parent","relative")),c.removeAttribute("loading-number")),U(c,h.bm("parent","hidden"))}m(),y.unmount()}function m(){var c,h;(h=(c=g.$el)==null?void 0:c.parentNode)==null||h.removeChild(g.$el)}function _(){var c;a.beforeClose&&!a.beforeClose()||(t.value=!0,clearTimeout(e),e=window.setTimeout(C,400),l.visible=!1,(c=a.closed)==null||c.call(a))}function C(){if(!t.value)return;const c=l.parent;t.value=!1,c.vLoadingAddClassList=void 0,i()}const p=ee({name:"ElLoading",setup(c,{expose:h}){const{ns:b,zIndex:R}=Be("loading");return h({ns:b,zIndex:R}),()=>{const $=l.spinner||l.svg,z=I("svg",{class:"circular",viewBox:l.svgViewBox?l.svgViewBox:"0 0 50 50",...$?{innerHTML:$}:{}},[I("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),D=l.text?I("p",{class:b.b("text")},[l.text]):void 0;return I(M,{name:b.b("fade"),onAfterLeave:C},{default:u(()=>[w(n("div",{style:{backgroundColor:l.background||""},class:[b.b("mask"),l.customClass,l.fullscreen?"is-fullscreen":""]},[I("div",{class:b.b("spinner")},[z,D])]),[[Ee,l.visible]])])})}}}),y=Ve(p),g=y.mount(document.createElement("div"));return{...Se(l),setText:v,removeElLoadingChild:m,close:_,handleAfterLeave:C,vm:g,get $el(){return g.$el}}}let O;const el=function(a={}){if(!we)return;const e=ll(a);if(e.fullscreen&&O)return O;const t=Xe({...e,closed:()=>{var v;(v=e.closed)==null||v.call(e),e.fullscreen&&(O=void 0)}});tl(e,e.parent,t),ne(e,e.parent,t),e.parent.vLoadingAddClassList=()=>ne(e,e.parent,t);let l=e.parent.getAttribute("loading-number");return l?l=`${Number.parseInt(l)+1}`:l="1",e.parent.setAttribute("loading-number",l),e.parent.appendChild(t.$el),de(()=>t.visible.value=e.visible),e.fullscreen&&(O=t),t},ll=a=>{var e,t,l,v;let i;return ue(a.target)?i=(e=document.querySelector(a.target))!=null?e:document.body:i=a.target||document.body,{parent:i===document.body||a.body?document.body:i,background:a.background||"",svg:a.svg||"",svgViewBox:a.svgViewBox||"",spinner:a.spinner||!1,text:a.text||"",fullscreen:i===document.body&&((t=a.fullscreen)!=null?t:!0),lock:(l=a.lock)!=null?l:!1,customClass:a.customClass||"",visible:(v=a.visible)!=null?v:!0,target:i}},tl=async(a,e,t)=>{const{nextZIndex:l}=t.vm.zIndex||t.vm._.exposed.zIndex,v={};if(a.fullscreen)t.originalPosition.value=T(document.body,"position"),t.originalOverflow.value=T(document.body,"overflow"),v.zIndex=l();else if(a.parent===document.body){t.originalPosition.value=T(document.body,"position"),await de();for(const i of["top","left"]){const m=i==="top"?"scrollTop":"scrollLeft";v[i]=`${a.target.getBoundingClientRect()[i]+document.body[m]+document.documentElement[m]-Number.parseInt(T(document.body,`margin-${i}`),10)}px`}for(const i of["height","width"])v[i]=`${a.target.getBoundingClientRect()[i]}px`}else t.originalPosition.value=T(e,"position");for(const[i,m]of Object.entries(v))t.$el.style[i]=m},ne=(a,e,t)=>{const l=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?U(e,l.bm("parent","relative")):te(e,l.bm("parent","relative")),a.fullscreen&&a.lock?te(e,l.bm("parent","hidden")):U(e,l.bm("parent","hidden"))},X=Symbol("ElLoading"),oe=(a,e)=>{var t,l,v,i;const m=e.instance,_=c=>ce(e.value)?e.value[c]:void 0,C=c=>{const h=ue(c)&&(m==null?void 0:m[c])||c;return h&&k(h)},p=c=>C(_(c)||a.getAttribute(`element-loading-${Te(c)}`)),y=(t=_("fullscreen"))!=null?t:e.modifiers.fullscreen,g={text:p("text"),svg:p("svg"),svgViewBox:p("svgViewBox"),spinner:p("spinner"),background:p("background"),customClass:p("customClass"),fullscreen:y,target:(l=_("target"))!=null?l:y?void 0:a,body:(v=_("body"))!=null?v:e.modifiers.body,lock:(i=_("lock"))!=null?i:e.modifiers.lock};a[X]={options:g,instance:el(g)}},al=(a,e)=>{for(const t of Object.keys(e))Ie(e[t])&&(e[t].value=a[t])},sl={mounted(a,e){e.value&&oe(a,e)},updated(a,e){const t=a[X];e.oldValue!==e.value&&(e.value&&!e.oldValue?oe(a,e):e.value&&e.oldValue?ce(e.value)&&al(e.value,t.options):t==null||t.instance.close())},unmounted(a){var e;(e=a[X])==null||e.instance.close()}};const f=a=>(Fe("data-v-cb0c6175"),a=a(),Ge(),a),nl={class:"card"},ol={class:"card-header"},dl=f(()=>o("span",null,"第一步（数据更新）",-1)),ul={key:0,class:"checkbox-container"},cl={class:"card-header"},rl=f(()=>o("span",null,"第二步（完整性检查）",-1)),il={key:0,class:"checkbox-container"},vl={class:"card-header"},_l=f(()=>o("span",null,"第三步（排程选项）",-1)),ml={key:0,class:"checkbox-container"},fl=f(()=>o("h3",null,"模型选择",-1)),pl={class:"model"},hl=f(()=>o("div",{class:"delay"},null,-1)),gl=f(()=>o("h3",null,"目标函数",-1)),bl=f(()=>o("h3",null,"其他参数",-1)),yl={class:"other"},kl={class:"mini_lock"},Cl={class:"delay"},xl=f(()=>o("span",null,"需求计划延迟期",-1)),Vl=f(()=>o("input",{type:"number",value:"3"},null,-1)),Sl=f(()=>o("span",null,"寻优次数",-1)),Bl=f(()=>o("span",null,"生产计划周期",-1)),El={class:"mini_product"},wl={class:"delay"},Il=f(()=>o("span",null,"采购计划延迟期",-1)),Tl=f(()=>o("span",null,"PO提前天数",-1)),Ll=f(()=>o("span",null,"YG提前最大天数",-1)),Al={__name:"schedule",setup(a){const e=Ae(),t=k([]),l=k({target:"1",number_cycles:2,scheduled_days_num:240,in_advance_po:7,buy_delay_days:5,yg_delta:90,consider_the_material:!0,consider_the_process:!1,produce_in_parallel:!0,consider_history:!0});$e(t,d=>{l.value.produce_in_parallel=d.includes("并行生产"),l.value.consider_the_process=d.includes("考虑工序"),l.value.consider_the_material=d.includes("考虑物料"),l.value.consider_history=d.includes("考虑未完成")});const v=k(!1),i=k(!0),m=k(!1),_=k(["BOM","工艺路径与标准工时","人员","日历","库存主数据","MOQ","机器"]),C=["BOM","工艺路径与标准工时","人员","日历","库存主数据","MOQ","机器"],p=["ERP","MES"],y=k(["ERP","MES"]),g=k(!0),c=k(!1);function h(d){_.value=d?C:[],m.value=!1}function b(d){y.value=d?p:[],c.value=!1}function R(d){const s=d.length;i.value=s===C.length,m.value=s>0&&s<C.length}function $(d){const s=d.length;g.value=s===p.length,c.value=s>0&&s<p.length}function z(){const d=[];y.value.includes("ERP")&&d.push(-1),y.value.includes("MES")&&d.push(-2),console.log(d),e.loading=!0,e.updateData(d).then(s=>{E.alert(s.message,"提示",{confirmButtonText:"OK"}),console.log("数据更新请求成功！")}).catch(s=>{console.log(s,"数据更新请求出错了")})}function D(){_.value.includes("BOM"),_.value.includes("工艺路径与标准工时"),_.value.includes("人员"),_.value.includes("日历"),_.value.includes("库存主数据"),_.value.includes("MOQ"),_.value.includes("机器"),e.loading=!0,e.integrityChecker().then(d=>{d.code==200?(e.loading=!1,E.alert("数据均完整","提示",{type:"success",confirmButtonText:"好的"})):d.code==202?(e.loading=!1,E.alert(d.message,"提示",{confirmButtonText:"好的,下载错误信息",callback:s=>{s=="confirm"&&Me()}})):d.code==201&&(e.loading=!1,E.alert(d.message,"提示",{confirmButtonText:"好"}))}).catch(d=>{})}function re(){e.startScheduling(l.value).then(d=>{d.code==200?E.alert("开始排程","提示",{confirmButtonText:"确定"}):E.alert(d.message,"提示",{confirmButtonText:"确定"})}).catch(d=>{})}function ie(){e.loading=!0,e.oneKeyScheduling(l.value).then(d=>{e.loading=!1,E.alert(d.message,"提示",{confirmButtonText:"确定"})}).catch(d=>{})}function F(){v.value=!v.value}const ve=q(()=>({height:v.value?"68.8px":"430px"})),_e=q(()=>({height:v.value?"68.8px":"430px"})),me=q(()=>({height:v.value?"68.8px":"480px"}));return(d,s)=>{const G=Oe("Remove"),K=Ue,j=Re,V=Qe,Q=Ye,Y=Je,H=ze,W=Ke,fe=je,pe=De,he=sl;return x(),Pe(Ne,null,[w((x(),B("div",nl,[n(Y,{class:"one update",style:N(ve.value)},{header:u(()=>[o("div",ol,[dl,n(j,{class:"button",onClick:F},{default:u(()=>[n(K,null,{default:u(()=>[n(G)]),_:1})]),_:1})])]),default:u(()=>[n(M,{name:"fade",class:"body"},{default:u(()=>[v.value?P("",!0):(x(),B("div",ul,[n(V,{modelValue:g.value,"onUpdate:modelValue":s[0]||(s[0]=r=>g.value=r),indeterminate:c.value,onChange:b},{default:u(()=>[S(" 全选 ")]),_:1},8,["modelValue","indeterminate"]),n(Q,{class:"group",modelValue:y.value,"onUpdate:modelValue":s[1]||(s[1]=r=>y.value=r),onChange:$},{default:u(()=>[(x(),B(ae,null,se(p,r=>n(V,{key:r,label:r},{default:u(()=>[S(J(r),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"]),o("button",{class:"check updateBtn",onClick:z},"数据更新")]))]),_:1})]),_:1},8,["style"]),n(Y,{class:"one",style:N(_e.value)},{header:u(()=>[o("div",cl,[rl,n(j,{class:"button",onClick:F},{default:u(()=>[n(K,null,{default:u(()=>[n(G)]),_:1})]),_:1})])]),default:u(()=>[n(M,{name:"fade",class:"body"},{default:u(()=>[v.value?P("",!0):(x(),B("div",il,[n(V,{modelValue:i.value,"onUpdate:modelValue":s[2]||(s[2]=r=>i.value=r),indeterminate:m.value,onChange:h},{default:u(()=>[S(" 全选 ")]),_:1},8,["modelValue","indeterminate"]),n(Q,{class:"group",modelValue:_.value,"onUpdate:modelValue":s[3]||(s[3]=r=>_.value=r),onChange:R},{default:u(()=>[(x(),B(ae,null,se(C,r=>n(V,{key:r,label:r},{default:u(()=>[S(J(r),1)]),_:2},1032,["label"])),64))]),_:1},8,["modelValue"]),o("button",{class:"check",onClick:D},"开始检查")]))]),_:1})]),_:1},8,["style"]),n(Y,{class:"two",style:N(me.value)},{header:u(()=>[o("div",vl,[_l,n(j,{class:"button",onClick:F},{default:u(()=>[n(K,null,{default:u(()=>[n(G)]),_:1})]),_:1})])]),default:u(()=>[n(M,{name:"fade",class:"body"},{default:u(()=>[v.value?P("",!0):(x(),B("div",ml,[n(pe,{model:l.value,class:"form"},{default:u(()=>[n(H,{class:"model_check"},{default:u(()=>[fl,o("div",pl,[n(Q,{modelValue:t.value,"onUpdate:modelValue":s[4]||(s[4]=r=>t.value=r)},{default:u(()=>[n(V,{label:"考虑物料",checked:""}),n(V,{label:"考虑工序"}),n(V,{label:"并行生产",checked:""}),n(V,{label:"考虑未完成",checked:""})]),_:1},8,["modelValue"]),hl])]),_:1}),n(H,{class:"target"},{default:u(()=>[gl,n(fe,{modelValue:l.value.target,"onUpdate:modelValue":s[5]||(s[5]=r=>l.value.target=r),class:"mini_target"},{default:u(()=>[n(W,{label:"1",size:"large"},{default:u(()=>[S("人员利用率最大")]),_:1}),n(W,{label:"2",size:"large"},{default:u(()=>[S("成本最低")]),_:1}),n(W,{label:"3",size:"large"},{default:u(()=>[S("交付率最高")]),_:1})]),_:1},8,["modelValue"])]),_:1}),n(H,{class:"lock"},{default:u(()=>[bl,o("div",yl,[o("div",kl,[o("div",Cl,[xl,Vl,Sl,w(o("input",{type:"number","onUpdate:modelValue":s[6]||(s[6]=r=>l.value.number_cycles=r)},null,512),[[L,l.value.number_cycles]]),Bl,w(o("input",{type:"number","onUpdate:modelValue":s[7]||(s[7]=r=>l.value.scheduled_days_num=r)},null,512),[[L,l.value.scheduled_days_num]])])]),o("div",El,[o("div",wl,[Il,w(o("input",{type:"number","onUpdate:modelValue":s[8]||(s[8]=r=>l.value.buy_delay_days=r)},null,512),[[L,l.value.buy_delay_days]]),Tl,w(o("input",{type:"number","onUpdate:modelValue":s[9]||(s[9]=r=>l.value.in_advance_po=r)},null,512),[[L,l.value.in_advance_po]]),Ll,w(o("input",{type:"number","onUpdate:modelValue":s[10]||(s[10]=r=>l.value.yg_delta=r)},null,512),[[L,l.value.yg_delta]])])])])]),_:1})]),_:1},8,["model"]),o("div",{class:"two_button"},[o("button",{class:"schedule",onClick:ie},"一键排程"),o("button",{class:"start",onClick:re},"开始排程")])]))]),_:1})]),_:1},8,["style"])])),[[he,A(e).loading]])],1024)}}},Ml=Le(Al,[["__scopeId","data-v-cb0c6175"]]);export{Ml as default};
