import{_ as x,aL as B,r,aJ as E,q as M,s as R,v as T,aK as h,c as I,e as t,d as o,h as f,f as u,F as L,a4 as N,o as z,t as F,p as A,l as D}from"./index-ba92c6b8.js";import{E as U,a as V}from"./el-table-column-fef6b0da.js";import"./el-checkbox-55ac5a6b.js";import"./el-scrollbar-7101c886.js";import{C as q}from"./CommonPlan-b2bd4878.js";import{P as J}from"./Pagination-db504da4.js";import"./isEqual-3fc68a3b.js";const i=l=>(A("data-v-2d190df2"),l=l(),D(),l),K={class:"container"},W=i(()=>o("span",{class:"first"},"新增",-1)),$=[W],j=i(()=>o("span",null,"删除",-1)),G=[j],H=i(()=>o("span",null,"刷新",-1)),O=[H],Q=i(()=>o("button",null,[o("span",null,"导出")],-1)),X={class:"main"},Y=["onClick"],Z={class:"bottom"},ee={__name:"basePlan",setup(l){B();let d=r(1),c=r(20);const n=E();M();const _=R();function P(e){n.getProcessSchemeById(e.id).then(a=>{}).catch(a=>{}),console.log(e,"@@"),_.push({path:"/viewBasePlan"})}function v(e){c.value=e,n.getProcessScheme(d.value,c.value).then(a=>{console.log("获取基础工艺方案列表数据成功")}).catch(a=>{})}const m=r([]);T(()=>{p()});function w(){n.createBasePlan.Edited=!1,_.push({path:"/createBasePlan"})}function y(e){d.value=e,n.getProcessScheme(e,c.value).then(a=>{}).catch(a=>{})}function S(){const e=[];m.value.forEach(a=>{e.push(a.id)}),N.confirm("确定删除这些工序方案吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{n.deleteProcessScheme(e).then(a=>{console.log("删除基础工艺方案成功"),h({type:"success",message:"删除成功"}),p()}).catch(a=>{console.log(a),console.log("批量删除基础工艺方案失败")})}).catch(()=>{h({type:"info",message:"取消删除"})})}function C(e){m.value=e}const b=r(null);function p(){n.getProcessScheme(d.value,c.value).then(e=>{h({type:"success",message:"刷新成功"}),b.value.clearSelection()}).catch(e=>{}),console.log("查询所有基础工序列表")}return(e,a)=>{const s=V,k=U;return z(),I(L,null,[t(q,{class:"plan"}),o("div",K,[o("div",{class:"head"},[o("button",{onClick:w},$),o("button",{onClick:S},G),o("button",{onClick:p},O),Q]),o("div",X,[t(k,{data:u(n).basePlanList.data,border:"","cell-style":{borderColor:"#9db9d6",textAlign:"center"},"header-cell-style":{borderColor:"#9db9d6",background:"#d9e9f8",color:"#000",textAlign:"center",fontWeight:"500"},"row-key":"id",height:"62vh",onSelectionChange:C,ref_key:"myTable",ref:b},{default:f(()=>[t(s,{type:"selection","reserve-selection":!0,label:"",width:"35",class:"one"}),t(s,{prop:"currentProcessScheme",label:"当前工艺方案",width:"180"},{default:f(g=>[o("a",{onClick:te=>P(g.row)},F(g.row.currentProcessScheme),9,Y)]),_:1}),t(s,{prop:"belongingProcess",label:"所属工序",width:"100"}),t(s,{prop:"productFamily",label:"产品族",width:"100"}),t(s,{prop:"processNumber",label:"工序ID",width:"90"}),t(s,{prop:"processName",label:"工序名称"}),t(s,{prop:"packagingMethod",label:"包装方式",width:"100"}),t(s,{prop:"standardTime",label:"标准工时",width:"100"}),t(s,{prop:"maxPersonnel",label:"人员Max",width:"100"}),t(s,{prop:"minPersonnel",label:"人员Min",width:"100"}),t(s,{prop:"employeeName",label:"员工姓名",width:"100"}),t(s,{prop:"number",label:"人数",width:"100"})]),_:1},8,["data"])]),o("div",Z,[t(J,{total:u(n).basePlanList.totalPages,onChangePage:y,onUpdateSize:v,totalRows:u(n).basePlanList.total},null,8,["total","totalRows"])])])],64)}}},ie=x(ee,[["__scopeId","data-v-2d190df2"]]);export{ie as default};
